<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.5.55">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>causalizer</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "...html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
     <script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>  <link href="../site_libs/htmltools-fill-0.5.8/fill.css" rel="stylesheet">

<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../site_libs/datatables-binding-0.31/datatables.js"></script>

<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
  
      </head>

  <body class="quarto-notebook">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> CausalizeR package testing</h6>

            <a href="../notebooks/causalizeR.qmd" class="btn btn-primary quarto-download-embed" download="causalizeR.qmd">Download Source</a>
          </div>

     <div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#causalizer-package-testing" id="toc-causalizer-package-testing" class="nav-link active" data-scroll-target="#causalizer-package-testing">CausalizeR package testing</a></li>
  <li><a href="#package-description" id="toc-package-description" class="nav-link" data-scroll-target="#package-description">Package description</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      <section id="causalizer-package-testing" class="level1">
<h1>CausalizeR package testing</h1>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    rio,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    here,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    janitor,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    udpipe,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    quanteda,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    quanteda.textplots,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    quanteda.textstats,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    tidyverse</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># pacman::p_load_gh("trinker/entity")</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_gitlab("culturalcartography/text2map.theme")</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>text2map.theme<span class="sc">::</span><span class="fu">set_theme</span>()</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("quanteda/quanteda.corpora")</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_gitlab("culturalcartography/text2map.corpora")</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"corpus.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>passivevoice<span class="ot">&lt;-</span><span class="cf">function</span>(<span class="at">effect=</span><span class="cn">NULL</span>,<span class="at">sentence=</span><span class="cn">NULL</span>){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  driver<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  affected<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>effect<span class="sc">%in%</span>sentence<span class="sc">$</span>lemma){}<span class="cf">else</span>{</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> (<span class="fu">which</span>(sentence<span class="sc">$</span>lemma<span class="sc">==</span>effect)<span class="sc">-</span><span class="dv">1</span>)[<span class="dv">1</span>]<span class="sc">:</span><span class="dv">1</span>){</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NNS"</span>){</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(k<span class="sc">==</span><span class="dv">1</span>){ affected<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[k]}<span class="cf">else</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(sentence<span class="sc">$</span>xpos[k<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"NNS"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"JJ"</span>){</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>          affected<span class="ot">&lt;-</span><span class="fu">paste</span>(sentence<span class="sc">$</span>lemma[k<span class="dv">-1</span>],sentence<span class="sc">$</span>lemma[k],<span class="at">collapse=</span><span class="st">"_"</span>)} <span class="cf">else</span>{</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            affected<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[k]}</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    } <span class="co">#Close the loop that finds a NOUN before the "effect"</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NNS"</span>){<span class="cf">break</span>}</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  } <span class="co">#Close the affected loop</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(m <span class="cf">in</span> (<span class="fu">which</span>(sentence<span class="sc">$</span>lemma<span class="sc">==</span>effect)<span class="sc">+</span><span class="dv">1</span>)[<span class="dv">1</span>]<span class="sc">:</span><span class="fu">length</span>(sentence<span class="sc">$</span>lemma)){</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[m]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[m]<span class="sc">==</span><span class="st">"NNS"</span>){</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(m<span class="sc">==</span><span class="fu">length</span>(sentence<span class="sc">$</span>lemma)){</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(sentence<span class="sc">$</span>xpos[m<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"JJ"</span>){driver<span class="ot">&lt;-</span><span class="fu">paste</span>(sentence<span class="sc">$</span>lemma[m<span class="dv">-1</span>],sentence<span class="sc">$</span>lemma[m],<span class="at">collapse=</span><span class="st">"_"</span>)} <span class="cf">else</span> {</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>          driver<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[m]}} <span class="cf">else</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(sentence<span class="sc">$</span>xpos[m<span class="sc">+</span><span class="dv">1</span>]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[m<span class="sc">+</span><span class="dv">1</span>]<span class="sc">==</span><span class="st">"NNS"</span>){  <span class="co"># for "JJ" it is m-1 because adjectives always come before the sustantive</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>              driver<span class="ot">&lt;-</span><span class="fu">paste</span>(sentence<span class="sc">$</span>lemma[m],sentence<span class="sc">$</span>lemma[m<span class="sc">+</span><span class="dv">1</span>],<span class="at">collapse=</span><span class="st">"_"</span>)}</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>{</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        driver<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[m]</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[m]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NNS"</span>){<span class="cf">break</span>}</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    } <span class="co">#Close the loop that finds a NOUN after the "effect"</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    } <span class="co">#Close the driver loop</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(driver)<span class="sc">&amp;&amp;!</span><span class="fu">is.null</span>(affected)){</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">cbind.data.frame</span>(<span class="at">driver=</span>driver,<span class="at">affected=</span>affected,<span class="at">effect=</span>effect))</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>activevoice<span class="ot">&lt;-</span><span class="cf">function</span>(<span class="at">effect=</span><span class="cn">NULL</span>,<span class="at">sentence=</span><span class="cn">NULL</span>){</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  driver<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  affected<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>effect<span class="sc">%in%</span>sentence<span class="sc">$</span>lemma){}<span class="cf">else</span>{</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> (<span class="fu">which</span>(sentence<span class="sc">$</span>lemma<span class="sc">==</span>effect)<span class="sc">-</span><span class="dv">1</span>)[<span class="dv">1</span>]<span class="sc">:</span><span class="dv">1</span>){</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NNS"</span>){</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(k<span class="sc">==</span><span class="dv">1</span>){ driver<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[k]}<span class="cf">else</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(sentence<span class="sc">$</span>xpos[k<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"NNS"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[k<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"JJ"</span>){</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>          driver<span class="ot">&lt;-</span><span class="fu">paste</span>(sentence<span class="sc">$</span>lemma[k<span class="dv">-1</span>],sentence<span class="sc">$</span>lemma[k],<span class="at">collapse=</span><span class="st">"_"</span>)} <span class="cf">else</span>{</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>            driver<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[k]}</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    } <span class="co">#Close the loop that finds a NOUN before the "effect"</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[k]<span class="sc">==</span><span class="st">"NN"</span>){<span class="cf">break</span>}</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>  } <span class="co">#Close the driver loop</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(m <span class="cf">in</span> (<span class="fu">which</span>(sentence<span class="sc">$</span>lemma<span class="sc">==</span>effect)<span class="sc">+</span><span class="dv">1</span>)[<span class="dv">1</span>]<span class="sc">:</span><span class="fu">length</span>(sentence<span class="sc">$</span>lemma)){</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[m]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">|</span>sentence<span class="sc">$</span>xpos[m]<span class="sc">==</span><span class="st">"NNS"</span>){</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(m<span class="sc">==</span><span class="fu">length</span>(sentence<span class="sc">$</span>lemma)){</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(sentence<span class="sc">$</span>xpos[m<span class="dv">-1</span>]<span class="sc">==</span><span class="st">"JJ"</span>){affected<span class="ot">&lt;-</span><span class="fu">paste</span>(sentence<span class="sc">$</span>lemma[m<span class="dv">-1</span>],sentence<span class="sc">$</span>lemma[m],<span class="at">collapse=</span><span class="st">"_"</span>)} <span class="cf">else</span> {</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>          affected<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[m]}} <span class="cf">else</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(sentence<span class="sc">$</span>xpos[m<span class="sc">+</span><span class="dv">1</span>]<span class="sc">==</span><span class="st">"NN"</span><span class="sc">||</span>sentence<span class="sc">$</span>xpos[m<span class="sc">+</span><span class="dv">1</span>]<span class="sc">==</span><span class="st">"NNS"</span>){  <span class="co"># for "JJ" it is m-1 because adjectives always come before the sustantive</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>              affected<span class="ot">&lt;-</span><span class="fu">paste</span>(sentence<span class="sc">$</span>lemma[m],sentence<span class="sc">$</span>lemma[m<span class="sc">+</span><span class="dv">1</span>],<span class="at">collapse=</span><span class="st">"_"</span>)}</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>{</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>        affected<span class="ot">&lt;-</span>sentence<span class="sc">$</span>lemma[m]</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>( sentence<span class="sc">$</span>xpos[m]<span class="sc">==</span><span class="st">"NN"</span>){<span class="cf">break</span>}</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    } <span class="co">#Close the loop that finds a NOUN after the "effect"</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  } <span class="co">#Close the affected loop</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(driver)<span class="sc">&amp;&amp;!</span><span class="fu">is.null</span>(affected)){</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">cbind.data.frame</span>(<span class="at">driver=</span>driver,<span class="at">affected=</span>affected,<span class="at">effect=</span>effect))</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>} <span class="co">#Close the conditional that looks for nouns before and after the verb</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>causalize <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">texts =</span> <span class="cn">NULL</span>, <span class="at">effect =</span> <span class="cn">NULL</span>, <span class="at">effect_num =</span> <span class="dv">0</span>, <span class="at">tokenizer =</span> <span class="cn">NULL</span>) {</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span> (<span class="fu">is.null</span>(tokenizer)) {</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>          tokenizer <span class="ot">&lt;-</span> <span class="fu">udpipe_download_model</span>(<span class="st">"english"</span>)</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>          tokenizer <span class="ot">&lt;-</span> <span class="fu">udpipe_load_model</span>(tokenizer<span class="sc">$</span>file_model)</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>     progbar <span class="ot">&lt;-</span> <span class="fu">txtProgressBar</span>(<span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="fu">length</span>(texts), <span class="at">style =</span> <span class="dv">3</span>)</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>     driver <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>     affected <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>     res.mat <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>     <span class="cf">for</span> (w <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(texts)) {</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>          annotated_text <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">udpipe_annotate</span>(tokenizer, texts[w]))</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>          sent.num <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(annotated_text<span class="sc">$</span>sentence_id))) {</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>               <span class="cf">if</span> (effect <span class="sc">%in%</span> annotated_text<span class="sc">$</span>lemma[annotated_text<span class="sc">$</span>sentence_id <span class="sc">==</span> i]) {</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>                    sent.num <span class="ot">&lt;-</span> <span class="fu">c</span>(sent.num, i)</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>               }</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (<span class="fu">is.null</span>(sent.num)) {</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>               <span class="cf">next</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>          } <span class="cf">else</span> {</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>               <span class="cf">for</span> (j <span class="cf">in</span> sent.num) {</span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>                    sent1 <span class="ot">&lt;-</span> annotated_text[annotated_text<span class="sc">$</span>sentence_id <span class="sc">==</span> j, ]</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>                    <span class="do">## Ensure that there are nouns before and after the verb. Skip sentence if this requirement is not met</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>                    effect_indices <span class="ot">&lt;-</span> <span class="fu">which</span>(sent1<span class="sc">$</span>lemma <span class="sc">==</span> effect)</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> (<span class="fu">any</span>(effect_indices <span class="sc">==</span> <span class="dv">1</span>)) {</span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>                         <span class="cf">next</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>                    } <span class="cf">else</span> {</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>                         <span class="cf">if</span> (<span class="st">"NOUN"</span> <span class="sc">%in%</span> sent1<span class="sc">$</span>upos[(effect_indices[<span class="dv">1</span>] <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">:</span><span class="dv">1</span>]) {</span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>                              <span class="cf">if</span> (<span class="st">"NOUN"</span> <span class="sc">%in%</span> sent1<span class="sc">$</span>upos[(effect_indices[<span class="dv">1</span>] <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">length</span>(sent1<span class="sc">$</span>lemma)]) {</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>                                   <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">grep</span>(<span class="st">"in response to|</span><span class="sc">\\</span><span class="st">bby</span><span class="sc">\\</span><span class="st">b|</span><span class="sc">\\</span><span class="st">bwith</span><span class="sc">\\</span><span class="st">b|</span><span class="sc">\\</span><span class="st">bas a result of"</span>, sent1)) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>                                        res.mat[[<span class="fu">length</span>(res.mat) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(<span class="fu">passivevoice</span>(<span class="at">effect =</span> effect, <span class="at">sentence =</span> sent1), <span class="at">effect_num =</span> effect_num, <span class="at">text_number =</span> w)</span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>                                   } <span class="cf">else</span> {</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>                                        res.mat[[<span class="fu">length</span>(res.mat) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(<span class="fu">activevoice</span>(<span class="at">effect =</span> effect, <span class="at">sentence =</span> sent1), <span class="at">effect_num =</span> effect_num, <span class="at">text_number =</span> w)</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>                                   }</span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>                              }</span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>                         }</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>               }</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>          <span class="fu">setTxtProgressBar</span>(progbar, w)</span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>     <span class="fu">return</span>(<span class="fu">do.call</span>(rbind.data.frame, res.mat))</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="package-description" class="level1">
<h1>Package description</h1>
<p>Determine whether certain sentences contain a specified effect (a word or phrase), and then classify these sentences as either active or passive voice. It uses the udpipe package for tokenization and annotation of the text.</p>
<p>Initialization: Loads a udpipe model for English if no tokenizer is provided. Sets up a progress bar to monitor the analysis progress across the text entries.</p>
<p>Data Processing Loop: Iterates over each text entry, tokenizes and annotates it to create a dataframe where each word is broken down by sentence, lemma, and part-of-speech tag. Identifies sentences that contain the specified effect (word or phrase).</p>
<p>Voice Classification: For each sentence containing the effect, it checks the position of the effect and the types of words before and after it. If the word before and after the effect are nouns, further checks are performed to classify the sentence as active or passive based on the presence of specific prepositions or phrases like “in response to”, “by”, or “with”. Depending on the classification, sentences are processed by either a passivevoice or activevoice function (these functions return a dataframe describing the sentence in context).</p>
<p>The passivevoice and activevoice functions are used to extract the subjects (drivers) and objects (affected entities) related to the effect in the sentence: passivevoice Function: Searches for nouns before the effect to identify the affected entity. Searches for nouns after the effect to identify the driver. activevoice Function: Searches for nouns before the effect to identify the driver. Searches for nouns after the effect to identify the affected entity.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># effects&lt;-cbind.data.frame(effect=c("decrease","increase"),effect_direction=c((-1),1))</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># temp.list&lt;-list()</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for(i in 1:length(effects$effect)){</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   temp.list[[i]]&lt;-causalize(corpus$Text,effect=effects[i,1],effect_num=effects[i,2])</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(temp.list, here("data/drivers_list.rds"))</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># decrease_driver &lt;- temp.list[[1]]</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># increase_driver &lt;- temp.list[[2]]</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># # Error in if (which(sent1$lemma == effect) == 1) { : </span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># #   the condition has length &gt; 1</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># # export temp.list to .Rds file</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># # test &lt;- import(here("data/drivers_list.rds"))</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># dat&lt;-do.call(rbind.data.frame,temp.list)</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># dat$driver&lt;-as.character(dat$driver)</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># dat$affected&lt;-as.character(dat$affected)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p>View result</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data/drivers_list.rds"</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6a5a43b6d10e917fcdd3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6a5a43b6d10e917fcdd3">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189","1190","1191","1192","1193","1194","1195","1196","1197","1198","1199","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1220","1221","1222","1223","1224","1225","1226","1227","1228","1229","1230","1231","1232","1233","1234","1235","1236","1237","1238","1239","1240","1241","1242","1243","1244","1245","1246","1247","1248","1249","1250","1251","1252","1253","1254","1255","1256","1257","1258","1259","1260","1261","1262","1263","1264","1265","1266","1267","1268","1269","1270","1271","1272","1273","1274","1275","1276","1277","1278","1279","1280","1281","1282","1283","1284","1285","1286","1287","1288","1289","1290","1291","1292","1293","1294","1295","1296","1297","1298","1299","1300","1301","1302","1303","1304","1305","1306","1307","1308","1309","1310","1311","1312","1313","1314","1315","1316","1317","1318","1319","1320","1321","1322","1323","1324","1325","1326","1327","1328","1329","1330","1331","1332","1333","1334","1335","1336","1337","1338","1339","1340","1341","1342","1343","1344","1345","1346","1347","1348","1349","1350","1351","1352","1353","1354","1355","1356","1357","1358","1359","1360","1361","1362","1363","1364","1365","1366","1367","1368","1369","1370","1371","1372","1373","1374","1375","1376","1377","1378","1379","1380","1381","1382","1383","1384","1385","1386","1387","1388","1389","1390","1391","1392","1393","1394","1395","1396","1397","1398","1399","1400","1401","1402","1403","1404","1405","1406","1407","1408","1409","1410","1411","1412","1413","1414","1415","1416","1417","1418","1419","1420","1421","1422","1423","1424","1425","1426","1427","1428","1429","1430"],["sanitation","raby vaccination","sample","mosquito population","result","week.Italy.The number","week","Fatality rate","number","province","rate","activity","overall activity","influenza activity","level","disease activity","risk","risk","risk","risk","risk","transmission","demand","immunization rate","number","pandemic","immunization rate","lymphocyte","disease program","transmission","global incidence","access","resurgence","health system","global incidence","time","weekly number","%","a&amp;nbsp","week","caution","case","number","number","rate","region","risk","risk","other health","resistant shigella","laboratory testing","variant","immunization coverage","mortality","cholera outbreak","immunization rate","safe water","number","week","migration","%","contractability","fatality rate","case","emergency level","outbreak","supplies","Cumulative case","number","overall number","number","person transmission","expert","disease","end","consultation rate","week","previous weekpng","same area","baseline","influenza activity","trend","report","influenza activity","influenza activity","p&amp;i mortality","seasonal influenza","influenza","influenza activity","activity","%","virus circulation","disease activity","influenza activity","%","risk","risk","risk","risk","risk","figure","case definition","mortality","cholera outbreak","fever outbreak","case management","fever outbreak","mortality","cholera outbreak","mortality","mosquito borne","health system","health system","week","demand","demand","%","%","%","proportion","alert rate","%","health system","median time","detection","virus neutralization","population","mink","demand","virus disease","information","%","mistrust","week","field","outbreak","outbreak","trend","number","number","number","summer month","addition","conjugate vaccine","country","overall trend","outbreak","province","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","risk","appetite","week","Fatality rate","week","weekly Cfr","%","fever","disease","%","city","city","case","weekly number","week","number","influenza","number","%","incidence","risk","distribution","climate","pivotal role","circulate serotype","pandemic","number","magnitude","risk","population risk","risk","hygiene","hygiene","pregnant woman","outbreak","water","transmission","mortality","risk","heavy rainfall","number","part","nbsp","number","number","oral rehydration","additional concern","movement","report","addition","awareness","availability","total number","number","virus","population movement","additional case","case","case","week","monthly number","risk","polio","fatal.Agricultural authority","resistance","influenza activity","time.List","other hand","influenza H3N2","level","time.List","case","circulation","influenza activity","correspond","trend","time.List","report period","activity","proportion","time.List","influenza activity","Ili activity","time.List","year","travel","country","testing","Rt","region","psittacosis","guinea","trade","trade","trade","risk","vaccination coverage","immunization coverage","risk","dengue","number","risk","identification","period","year","Dengue case","conflict","region","transmission","winter","%","magnitude","risk","aegypto vector","current virus","vulnerability","America&amp; nbsp","event","river","routine surveillance","chinese surveillance","chinese authority","part","hospital admission","detection","respiratory surveillance","trend","number","risk","risk","resistance","cause","epidemiological week","short time","vaccination coverage","seasonality","mosquito population","division &amp;nbsp","number","likelihood","economic factor","epidemiological alert","health emergency","rare instance","incidence","patient","epidemiological alert","national level","number","%","case","nbsp","first half","region","bleed","risk","second half","Epidemiological alert","Epidemiological alert","decade","detection","data","child","incidence","myocarditis","enterovirus infection","incident","risk","risk","water","spread","health care","risk","effective vaccine","challenge","gap","Early War","number","outbreak","Region","immunization coverage","risk","awareness","zoonotic influenza","awareness","zoonotic influenza","pneumococcal resistance","risk","Region","border population","likelihood","country","summer season","fold","fold increase","period","fold increase","period","period","fold","chikungunya","impact","likelihood","chikungunya case","case","week","week","province","ndash","number","%","current situation","province","cholera situation","population","climate change","access","risk","border population","new cholera","ndash","outbreak","ndash","risk","treatment","outbreak show","number","immunization","-risk","number","third trimester","conjunction","risk","risk","Reactive Vaccination","population immunity","population immunity","immunization coverage","-normal hurricane","development","term solution","long term","context","endemicity","regional Health","status update","number","iGAS","time","laboratory surveillance","iGAS infection","virus circulation","additional precautions.Healthcare","ndash","challenge","mosquito population","fatality","%","proportion","ndash","risk","pasture","border","risk","risk","vector -control","violence","ndash","risk","season","fatality","magnitude","country","province","laboratory confirmation","capacity","seasonal period","morbidity","risk","province","rainfall","rainfall","number","hospital capacity","dengue case","factor","case incidence","healthcare worker","response","number","new HIV","response","number","new HIV","response","number","health","health worker","response","number","measure","health worker","response","number","community reticence","risk","number","population movement","health worker","community reticence","risk","number","community reticence","volatility","risk","number","chance","likelihood","number","risk","caution","case number","community reticence","risk","number","community reticence","risk","number","community reticence","risk","capacity","likelihood","number","week","risk","number","security","number","contact trace","pipeline","case incidence","%","pipeline","Movement","%","pipeline","spread","slaughterhouse","symptom onset","day","week","tour company","outbreak","mosquito population","fever casis","part","rainy season","risk","number","outbreak","ndash","health impact","risk","cholera case","ndash","province","safety","health impact","evidence generation","health impact","evidence generation","population movement","number","factor","community transmission","week","ndash","likelihood","animal","transmission","risk","ndash","consumption","level","community","susceptibility","vaccination coverage","trend","risk","chance","vaccination coverage","country","province","%","province","food insecurity","person","recent instability","deficiency","monsoon season","dengue","number","&amp;nbsp","cholera case","sequence","widespread testing","sequencing","air travel","triennium","risk","water","vector density","number","flow","national reference","Vaccination coverage","risk","control","Covid","population","virus","fever","infectiousness","guinea","risk","risk","risk","susceptibility","health worker","incidence","type","contact","death","weekly number","death","rat population","death","number","number","first case","poor hygiene","surveillance system","malaria","border","decline","Directorate","dengue fever","number","number","high number","smallpox","supplies","number","case","isolation ward","country","death","public health","possible reason","%","pulmonary syndrome","attack rate","human population","number","cholera","situation","water supply","plague","population","casis","monthly number","number","influenza virus","activity","region","activity","number","whole country","whole country","case","number","year","sharply","casis","water supply","cholera","Floods","result","case","epidemiological surveillance","health","situation","report","area","rate","control","case","vaccination coverage","cholera case","country","response","number","cholera case","time","data","time","data","resistance","transmission","total","number","number","death","number","number","death","number","number","advice","major outbreak","health awareness","focus","level","Intersectoral coordination","media information","mortality","Ministry","reclassification","indication","number","number","country","mobilization activity","larva breeding","opportunity","order","nbsp","new province","country","community awareness","day","world","health risk","case","consistency","outbreak","travel advisory","number","case","new data","important way","number","transmission chain","represent","number","evidence","level","attention","isolation","important step","Pcr","part","number","probable case","education","day","time","factor","reason","case","situation","sARs","capacity","spread","use","new case","number","rate","country","activity","activity","influenza activity","activity","activity","influenza activity","week","influenza activity","influenza","incidence","week","activity","%","consultation rate","activity","persist","week","trend","proportion","week","influenza","influenza activity","%","activity","activity trend","among country","among country","completeness","southern part","example","hospitalization","world","completeness","rate","indigenous people","level","susceptibility testing","completeness","region","trend","influenza activity","influenza activity","completeness","level","disease activity","completeness","influenza activity","threshold","disease","completeness","activity","completeness","illness","level","north","influenza activity","influenza activity","declining trend","tropical region","completeness","illness","activity","activity","region","overall trend","completeness","activity","Caribbean Island","completeness","disease activity","respiratory illness","completeness","influenza","influenza activity","evidence","influenza transmission","disease activity","completeness","acute respiratory","influenza","completeness","number","completeness","completeness","p&amp;i mortality","activity","disease activity","influenza activity","disease activity","completeness","activity","week","risk","activity","note","activity","influenza activity","completeness","risk","note","rate","Detection","disease activity","completeness","disease activity","completeness","trend","previous week","end","completeness","russian Federation","note","risk","completeness","activity","circulation","addition","completeness","several country","several country","influenza activity","trend","several country","Ari/","addition","completeness","trend","several country","addition","disease activity","completeness","activity","virus activity","russian federation","completeness","virus transmission","influenza virus","influenza activity","trend","respiratory disease","%","influenza b","completeness","influenza activity","activity","addition","month","activity","trend","completeness","trend","limit data","influenza virus","influenza virus","disease activity","week","sentinel detection","completeness","virus transmission","influenza virus","trend","influenza virus","sentinel detection","completeness","pneumonia","lack","completeness","acute respiratory","tropical zone","respiratory disease","southern hemisphere","completeness","epidemic threshold","Cuba","age","completeness","trend","pandemic virus","capital area","national level","activity","completeness","sentinel","activity","completeness","activity","completeness","note","country","completeness","completeness","end","trend","influenza virus","completeness","trend","recent media","completeness","recent reports","influenza virus","influenza virus","completeness","respiratory disease","rate","completeness","hemisphere winter","last week","level","type benefit","completeness","southern hemisphere","area","report week","acute respiratory","completeness","stable activity","influenza activity","overall rate","seasonal baseline","late season","later","completeness","western state","addition","completeness","consultation rate","completeness","state","completeness","rate","weekly rate","influenza activity","community","completeness","number","population movement","holiday season","number","further information","Herder","number","week","trend","case","seven","yellow fever","fever","preparedness","Lassa fever","number","dengue fever","risk","area","Herder","intensity","rainy season","urban setting","number","day","health infrastructure","potential","clonal strain","route","concern","healthcare","response","number","number","number","%","emergency room","island","severe dengue","current outbreak","testing capacity","number","cvdpv2 outbreak","gap","%","%","%","demand","rainy season","immunization","immunization","%","%","third trimester","water","%","vigilance","Covid","processing Covid","risk","frequency","host","risk","immunization","risk","slaughterhouse","presence","community","indicator","possibility","community","response","lemy","light","health district","number","light","vector burden","existence","density","day case","variant","%","country","alert rate","%","%","immunization","number","%","number","infectivity","Voc","transmissibility","virus","frequency","transmissibility","Epidemiologic investigation","case incidence","transmission","unusual transmission","capacity","disease incidence","risk","case","risk","proportion","sequencing","several health","response","number","response","number","response","number","presence","response","number","response","light","response","number","%","case","number","%","supplemental immunization","useful strategy","tandem","response","number","number","security","future security","response","health","municipality","EVD","EVD","risk","response","health","risk","ownership","response","risk","past week","past week","response","risk","holistic understanding","acceptance","response","risk","number","number","result","response","risk","response","risk","response","antimicrobial resistance","surveillance","immunization coverage","death","municipality","contact","region","dengue casis","immunization coverage","number","combination","epidemiological alert","detection","african region","malnutrition","hantavirus case","detection","syndromic surveillance","insecurity","risk","response","insecurity","risk","risk","situation","optimal treatment","case incidence","awareness","awareness","partner","vigilance","traveller &amp;rsquo","country","traveller &amp;rsquo","domestic air","domestic air","domestic air","area","previous outbreak","movement","risk","number","risk","community mix","risk","risk","cumulative number","risk","risk","excess rainfall","dengue fever","last week","border contamination","poor sanitation","number","contact","vaccination","health messaging","jaundice","fever activity","fever outbreak","fever activity","seasonal peak","Rvf infection","risk","casis","adaptation","coli","increase","risk","risk","deg ;c","total","country","patient","number","incidence","number","country","patient","focal point","rise","patient","number","potential cause","patient","patient","microcephally","information","causis","number","causis","number","causis","extensive flooding","causis","week","cvdpv2","Democratic republic","Democratic republic","country","synergy","operational response","objective","commitment","cough","guinea","trade","trade","trade","trade","trade","trade","trade","trade","trade","trade","trade","trade","risk","evidence","frequency","evidence","evidence","age","country","evidence","medical attention","number","number","security situation","management","confirmation","risk","area","accessibility","access","mosquitoe","evidence","access","vaccination requirement","part","risk","commune","incidence","risk","number","number","hygiene","cvdpv2","epidemiological week","use","resistance","resistance","resistance","intensity","collaboration","policy","end","monitoring","case","resistance","awareness","awareness","field","awareness","town","virus","epidemiological situation","poultry","fever vaccine","concern","virus activity","population movement","human case","total","mobile surveillance","significant progress","place","vigilance","risk","%","need","anxiety","control","number","place","community","capacity","recent tsunami","risk","avian influenza","Nam","H5n1 virus","soap distribution","camp","quality","quality","disease","quality","outbreak","National authority","region","second week","poultry","environment","frequency","widespread","activity","possibility","week","influenza a","week","week","activity","country","%","widespread epidemics","acquisition","acquisition","week","week","consultation rate","consultation rate","%","country","activity","activity","activity","activity","activity","consultation rate"],["risk","incidence","lactation","wash effect","caseload","activity","case","peak","month","2008.Case","number","%","place","influenza activity","baseline","influenza transmission","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","bat access","health system","new strain","Andean subregion","disease program","new strain","prothrombin level","pandemic","bat access","cholera remain","cholera","risk","demand","cholera","summer","week","%","%","number","outbreak","day","risk level","case indicator","case","country","immunization rate","precautionary measure","functionality","risk","case management","sensitivity","outbreak","outbreak","risk","strain","inflow","week","new case","table","%","echocardiogram","%","middle","number","case","case","number","province","average","municipality","transmission","case number","year","weekly average","rate","baseline level","activity trend","care","influenza activity","baseline","trend","disease activity","area","area","threshold","amount","week","return","activity","activity","circulation","week","intensity","number","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","peak","case detection","outbreak","risk","trend","mortality","trend","outbreak","risk","outbreak","rainy season","demand","demand","alerts","care worker","healthcare worker","laboratory activity","number","laboratory activity","proportion","Covid","laboratory activity","demand","day","time","extend","incidence","%","care worker","number","incidence","case","resistance","week","casis","casis","case incidence","overall","summer month","summer month","summer month","virus","number","trend","district","number","case","case number","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","appropriate measure","coughing","week","peak","last week","%","%","week","impact","number","case","case","states","camp","consultation rate","decline","week","week","time","number","nbsp","abundance","european region","burden","incidence","risk","season","dengue epidemics","different serotype","circulate serotype","several factor","risk","risk","risk","risk","defecation","new mutation","case definitions","transmission","number","country.Please note","deaths.&amp;nbsp","number","epidemics","cholera outbreak","coverage","diarrhoea case","outbreak.As &amp;nbsp","report","understanding","mobilization activity","education programme","report","activity","virulence","border area","flaccid paralysis","case","control measure","week","increase","burial practice","level","number","adverse effect","island","completeness","capital","level","influenza virus","completeness","association","region","peak level","H1n1","country","completeness","activity","trend","addition","completeness","activity","influenza virus","completeness","number","risk","psittacosis cases.DenmarkDenmark","indication","diagnostic practice","c. psittaci","awareness","case Fatality","area","area","area","variable","risk","intensify effort","variable","health challenge","dengue case","Several factor","dengue outcomes","region","second half","case","geographical spread","country","water pool","number","Cfr","dengue epidemics","different serotype","urbanization","risk","adequate healthcare","risk","animal movement","risk","illness","illness","lifte","community","data","pathogens","detection","winter season","fold","clade","air quality","antibiotic","incidence","diphtheria","likelihood","municipality","comparison","high humidity","week","lsquo","country","risk","Barré","implementation","risk","potential cause","healthcare facility","country","casis","current season","number","%","case","number","rainfall","mortality risk","serotype","case","chikungunya","region","incidence","poultry infection","incidence","difficulty","patient","young infant","patient","number","population movement","third trimester","defecation","risk factor","risk","crowd settlement","childhood vaccination","number","population immunity","week","week","access","number","intensify effort","case","country","surveillance","country","surveillance","problem","several factor","number","risk","risk","bariatric case","transmission","case","fold","-fold","fold","fold","%","chikungunya","transmission","transmission","vector dynamics","region","year","case","case","Awd","risk","month","lt","number","influx","risk","risk","population displacement","cholera","province","travel","week","risk","risk","risk","number","underestimation","number","outbreak show","number","vaccination coverage","risk","risk","community engagement","group","vaccination coverage","population immunity","population immunity","case","intensify effort","severity","number","production","vaccine production","population mixing","light","number","number","indicate","respiratory viruse","notification","resistance","general population","light","risk","risk","risk","high humidity","health","disease","week","risk","number","risk","risk","ndash","medical supplies","spread","result","risk","capacity","deaths.Dengue case","hospital capacity","dengue case","pressure","risk","surveillance","country","case","virus circulation","authority","pressure","seasonal distribution","seasonal distribution","addition","dengue case","virus","possibility","encouraging sign","casis","likelihood","capacity","level","likelihood","capacity","level","likelihood","capacity","incidence","years.Case","likelihood","capacity","need","case","likelihood","capacity","likelihood","country","capacity","immunity gaps","case","likelihood","country","capacity","likelihood","past week","country","capacity","symptom","factor","capacity","long time","Operations","result","likelihood","country","capacity","likelihood","country","capacity","likelihood","country","country","factor","capacity","transmission","country","capacity","response functions.There","response operation","number","funding","encouraging sign","proportion","funding","risk","past week","funding","country border","risk","time","surveillance effort","Democratic republic","region","transmission","activity","response","vigilance","risk","border","fever outbreak","risk","risk","potential","immunization rate","province","risk","number","measure","potential","outcome data","potential","outcome data","border transmission","spread","susceptibility","association","case","risk","rainy season","transmission","evidence","activity","risk","holiday","acute hepatitis","date","healthy children.Factor","border effort","risk.A","sonnei infections","symptomatic treatment","-border effort","capacity","measle case","death","death","number","susceptibility","risk","mortality","mosquito density","number","health impacts","bed capacity","outbreak","affinity","sequencing","country","risk","country","new IDP","defecation","monsoon season","population","Covid","demand","day","Vaccination coverage","risk","population mobility","risk","bat","initial alert","death","risk","human","guinea","human","vaccination programmes.&amp;nbsp","risk","population","period","condition","case","week","meningitis","fever","dengue","day","disease clinics","casis","number","crude mortality","season","cholera case","meningococcal meningitis","laboratory","island","district","district","transmission","susceptibility","treatment centre","deal","care facility","case","cholera outbreak","case","control","occurrence","activity","syndrome","number","animal contact.Result","case fatality","total","spite","risk","begin","week","week","peak","threshold","epidemic","influenza activity","cholera incidence","beginning","border","malaria case","transmission occur","peak transmission","period","cholera casis","number","flood","number","epidemics","risk","attention","trend","capacity","dengue case","trend","number","diarrhoea case","case","tourist destination","surveillance","plan","country","cholera activity","need","epidemic","notification","province","nbsp","province","nbsp","strategy","beginning","month","incubation period","pilgrim","pilgrim","year","pilgrim","pilgrim","year","casis","immunization programme","number","community","awareness","musical event","strategy","cholera outbreak","administrative Region","number","deaths.&amp;nbsp","number","comparison","population","incidence","community cooperation","dissemination","number","number","number","number","surveillance","volunteer","thrombocytopenia","surveillance activity","health risk","figure","week","total","awareness","evidence","report casis","number","awareness","stable","team","day","stable","national authority","decision","global alert","awareness","awareness","reliability","number","basis","total","sARs awareness","casis","new case","risk","hospital","figure","spread","caseload","partner","virus","risk","confidence","future","acute malnutrition","viruse","week","week","part","week","week","area","activity","country","week","decline","influenza a","week","child","population","week","viruse","activity","slight","overall incidence","influenza a","influenza","week","incidence","week","activity trend","activity trend","activity trend","time","influenza","year","place","time","time","area","risk","tropical region","H1N1 influenza","time","disease","influenza activity","threshold","trend","time","country","activity","time","influenza","activity remain","influenza activity","time","area","time","hemisphere","baseline","week","transmission","threshold","trend","trend","time","start","part","influenza virus","trend","trend","time","temperate zones","illness","time","intensity","season","time","activity spread","start","transmission","country","week","time","week","week","time","rate","time","time","threshold","region","activity","activity","activity","time","part","mortality","underlying condition","activity","activity","peak","part","time","medical condition","disease activity","other country","accounting","activity","time","disease activity","time","activity","activity","activity","time","activity","activity","publication","time","activity","influenza H1n1","proportion","time","number","trend","trend","exception","influenza","several week","proportion","time","influenza activity","influenza","proportion","world","time","virus","area","respiratory disease","time","region","evidence","circulation","influenza","association","week","federation","time","Caribbean","period","circulation","ILI","disease activity","week","time","tropical zone","extent","association","part","consecutive week","%","influenza","time","number","proportion","several country","number","southwestern region","time","age","age group","time","week","activity","%","activity","time","week","city","threshold","time","consecutive week","influenza activity","threshold","threshold","virus transmission","time","extent","area","time","area","time","disease activity","southern hemisphere","time","time","level detection","influenza activity","%","time","first week","influenza activity","time","influenza activity","level","%","time","zone","month","time","influenza viruse","proportion","intensity","influenza type","time","respiratory disease","influenza activity","rate","week","time","activity","week","week","month","threshold","number","time","state","circulation","time","baseline","time","number","time","week","baseline","week increase","rate","time","part","risk","movement","issue","confidence","risk","chikungunya","number","fever outbreak","case","international traveller","occurrence","case","concern","case","response","hospitalization","occupational activity","risk","risk","rainy season","risk","risk","cholera serotype","suburb","migration","rainy season","risk","rain","period","chance","likelihood","capacity","response","response","case","visit","transmission","health care","likelihood","nbsp","cVDPV2 case","risk","new strains","laboratory","laboratory activity","laboratory activity","health system","density","likelihood","likelihood","laboratory activity","laboratory","risk","defecation","laboratory","outbreak declaration","population mobility","number","infection","human monkeypox","mine result","unvaccinated population","number","flooding","risk","flooding","risk","proportion","symptom onset","risk","detection","end","region","measle outbreak","vaccination coverage.An","dengue case","rainy season","incidence","rainy season","fold","identify variant","circulating viruse","routine sequencing","week","laboratory activity","laboratory activity","likelihood","reason","laboratory activity","spread","D614g substitution","transmissibility","viral load","infectiousness","virus mutation","viral load","role","Covid","sequencing","transmission","country","response","comorbidity","mink farming","small facility","%","other fur","continuation","likelihood","capacity","likelihood","capacity","likelihood","capacity","response team","likelihood","capacity","number","number","likelihood","capacity","measle case","measle case","%","%","population immunity","uptake","EVD case","likelihood","capacity","outbreak","response personnel","community capacity","likelihood","capacity","vaccination","week","week","other","likelihood","capacity","facility","key part","likelihood","population movement","number","number","likelihood","population movement","awareness","community","likelihood","population movement","province","province","security challenge","likelihood","population movement","likelihood","population movement","likelihood","Region","risk","intensify effort","peak season","vaccination","season","case","threshold","intensify effort","health zone","figure","hantavirus pulmonary","awareness campaigns","risk","vulnerability","rodent habitat","awareness campaign","time","virus transmission","other partner","risk","precarious situation","home","unsafe burials","insecurity","risk","recent week","community","community","awareness","outbreak declaration","travel partner","city","travel partner","risk","risk","risk","risk","season","horn","sanitation","S&amp; atilde","fever virus","risk","human","human","number","human","chikungunya","transmission","disease","number","risk","risk","risk population","number","risk","risk","outbreak","report","number","report","disease awareness","proportion","transhumance pattern","first report","virus strain","toxin","control team","pregnancy","pregnancy","vector density","incidence","incidence","care facility","Don","fold","incidence","incidence","care facility","number","DONs","care facility","ndash","Gb incidence","care facility","care facility","epidemiological report","pregnancy","PAHO","update","PAHO","update","PAHO","transmission","PAHO","case","international spread","number","number","transmission","sensitization effort","commitment","commitment","objective","fever","death","area","area","area","area","area","area","area","area","area","area","area","area","population","extent","flaccid paralysis","extent","extent","surveillance","extent","activity","chance","additional wards","local authority","difficulty","surveillance","market","implant","migration","school","community participation","high temperature","activity","community participation","season","accountability","pilgrim","case","country","situation","country","region","surveillance activity","risk","number","healthcare","adverse effect","adverse effect","adverse effect","polio","severe case","awareness","case","availability","human case","adverse effect","media staff","diagnostic capacity","surveillance capacity","national authority","day","transmissibility","capacity","weather","vaccination coverage","case","season","rainy season","virus","week","efficiency","engagement","number","measure","protective equipment","number","equipment","risk","unease","response capacity","week","prevention","epidemiological surveillance","risk","tsunami","possibility","consumption","pathogenicity","water point","soap distribution","nongovernmental organization","nongovernmental organization","mortality","nongovernmental organization","virus transmission","surveillance","spread","number","transmission","exposure","likelihood","viruse","widespread","human","activity","activity","activity","activity","week","activity","threshold","exposure","likelihood","likelihood","activity","low level","week","disruption","threshold","viruse","week","week","region","week","country","%"],["decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase","increase"],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[13,29,32,62,416,632,890,1172,1172,1172,1202,1214,1226,1226,1226,1232,1304,1316,1385,1391,1433,1439,1588,1606,1628,1630,1738,1791,1792,1841,1845,1846,1877,1882,1923,1928,1952,1952,1970,2090,2212,2228,2260,2336,2366,2366,2500,2519,2548,2675,2692,2720,2758,2777,2777,2794,2918,3386,3416,3530,3860,3878,3986,4382,4910,4940,5120,5636,6704,6704,6860,6962,7292,7424,7616,7718,7724,8000,8006,8030,8036,8042,8066,8084,8090,8102,8102,8150,8156,8162,8168,8168,8180,8180,8186,8336,8342,8348,8360,8384,8462,8464,8507,8507,8536,8549,8560,8609,8609,8687,8774,8854,8860,8864,8914,8920,8954,8984,8984,9002,9062,9062,9178,9212,9212,9248,9254,9254,9268,9278,9278,9332,9386,9470,9578,9590,9596,9656,9880,9934,9952,9982,10132,10210,10562,11210,11846,11894,12566,12590,12602,12608,12620,12626,12632,12662,12668,12680,12686,12698,12716,12740,12746,12758,12770,12794,12812,12830,12842,12920,12938,12944,12956,12968,12986,13034,13088,13100,13208,13214,13220,13226,13244,13262,13268,13292,13304,13316,13328,13334,13340,13370,13382,13394,13412,13418,13424,13430,13436,13442,13460,13466,13478,13490,13496,13502,13508,13520,13526,13532,13538,13544,13550,13562,13568,13580,13598,13604,13610,13616,13622,13628,13634,13646,14156,15110,15110,15374,15374,15554,15830,15950,17474,17606,17666,17972,18020,18554,18554,18554,18584,18584,18596,2,2,2,2,2,2,2,2,3,4,4,13,14,15,16,17,32,44,62,116,230,332,356,374,410,416,416,422,482,512,536,578,626,632,650,680,746,752,752,788,794,794,848,896,1046,1088,1088,1172,1202,1202,1202,1214,1214,1214,1214,1214,1214,1226,1226,1226,1226,1232,1232,1232,1244,1244,1256,1256,1256,1258,1259,1370,1400,1406,1412,1463,1483,1487,1493,1496,1496,1496,1496,1496,1496,1496,1496,1496,1496,1496,1496,1496,1497,1498,1498,1498,1500,1504,1504,1510,1520,1520,1520,1520,1520,1520,1522,1528,1529,1534,1551,1564,1567,1588,1589,1597,1597,1598,1600,1600,1600,1615,1615,1618,1618,1619,1620,1620,1628,1628,1628,1629,1630,1630,1630,1631,1631,1632,1632,1632,1635,1640,1641,1672,1681,1682,1683,1690,1695,1697,1700,1700,1700,1702,1702,1712,1714,1724,1724,1731,1745,1750,1757,1757,1763,1763,1767,1768,1773,1780,1780,1786,1790,1790,1790,1790,1790,1790,1790,1790,1792,1792,1792,1792,1793,1808,1814,1832,1833,1844,1844,1844,1844,1844,1844,1844,1846,1846,1846,1850,1851,1861,1863,1864,1865,1873,1876,1882,1883,1888,1889,1889,1895,1906,1909,1910,1912,1919,1922,1922,1922,1922,1927,1927,1928,1928,1928,1928,1928,1928,1930,1931,1931,1935,1936,1946,1948,1970,1970,1977,1978,1996,1996,2001,2008,2008,2017,2019,2020,2024,2026,2026,2032,2032,2032,2044,2060,2062,2068,2068,2071,2073,2074,2080,2080,2080,2090,2090,2092,2092,2098,2104,2104,2110,2116,2116,2120,2120,2122,2122,2132,2132,2134,2134,2146,2146,2146,2152,2156,2158,2158,2158,2164,2164,2164,2164,2168,2170,2170,2176,2180,2180,2182,2182,2182,2194,2194,2194,2200,2200,2200,2212,2212,2228,2230,2230,2252,2254,2264,2264,2276,2276,2276,2306,2306,2306,2332,2333,2336,2354,2366,2366,2378,2386,2408,2408,2410,2446,2450,2467,2469,2488,2500,2509,2511,2512,2515,2518,2519,2524,2525,2530,2530,2542,2542,2570,2571,2572,2614,2614,2614,2625,2632,2642,2642,2644,2651,2656,2674,2679,2687,2692,2696,2696,2696,2698,2698,2698,2698,2702,2704,2704,2705,2708,2714,2722,2723,2758,2762,2764,2765,2818,2824,2824,2824,2825,2825,2830,2836,2842,2848,2852,2854,2860,2860,2878,2878,2884,2902,2930,2930,2960,3026,3074,3098,3158,3230,3254,3356,3380,3638,3650,3650,3662,3716,3716,3728,3740,3752,3758,3794,3806,3806,3824,3824,3836,3860,3884,3926,3950,3974,4022,4022,4028,4034,4034,4034,4046,4166,4190,4196,4196,4202,4202,4250,4262,4298,4310,4310,4322,4340,4400,4406,4454,4532,4538,4550,4550,4556,4556,4562,4562,4574,4574,4598,4622,4628,4628,4652,4652,4766,4778,4892,4898,4898,4904,4904,4910,4910,4976,5150,5234,5234,5234,5240,5240,5240,5312,5348,5354,5474,5510,5666,5726,5726,5882,6074,6356,6452,6464,6464,6482,6500,6506,6518,6518,6578,6704,6728,6914,6950,6998,6998,7010,7016,7022,7052,7052,7070,7070,7082,7082,7094,7100,7106,7106,7106,7106,7106,7106,7124,7142,7178,7202,7232,7232,7274,7298,7304,7322,7346,7424,7430,7478,7526,7556,7592,7616,7718,7718,7718,7724,7724,7724,7742,7742,7742,7742,7742,7742,7742,7742,7742,7742,7748,7748,7748,7748,7748,7748,7748,7748,7748,8000,8000,8000,8006,8006,8006,8006,8006,8012,8012,8012,8018,8018,8018,8024,8024,8024,8024,8024,8030,8030,8030,8036,8036,8036,8036,8042,8042,8048,8048,8048,8048,8048,8048,8048,8048,8054,8054,8054,8054,8054,8054,8060,8060,8060,8066,8066,8066,8072,8072,8072,8072,8072,8072,8078,8078,8078,8084,8084,8090,8096,8096,8096,8096,8096,8096,8102,8102,8102,8102,8102,8102,8102,8102,8108,8108,8108,8108,8108,8108,8114,8114,8120,8120,8120,8120,8126,8126,8126,8126,8132,8132,8132,8132,8138,8138,8138,8138,8138,8138,8138,8138,8144,8144,8144,8144,8144,8150,8150,8150,8150,8156,8156,8156,8156,8156,8156,8156,8156,8162,8162,8162,8162,8162,8162,8162,8168,8168,8168,8168,8168,8168,8168,8168,8174,8174,8174,8174,8174,8174,8180,8180,8180,8186,8186,8186,8186,8186,8192,8192,8192,8192,8198,8198,8198,8198,8198,8198,8204,8204,8204,8210,8210,8216,8216,8216,8222,8228,8228,8228,8228,8234,8234,8234,8240,8240,8240,8240,8246,8246,8246,8252,8252,8252,8252,8252,8258,8258,8258,8258,8258,8264,8264,8264,8264,8264,8264,8264,8270,8270,8270,8276,8276,8282,8282,8288,8288,8288,8288,8288,8416,8440,8446,8447,8476,8483,8486,8492,8500,8504,8516,8518,8534,8542,8558,8564,8564,8596,8620,8621,8638,8674,8686,8690,8692,8692,8716,8752,8774,8774,8780,8780,8780,8785,8786,8786,8786,8786,8786,8786,8794,8804,8804,8806,8828,8834,8840,8848,8854,8854,8860,8864,8870,8879,8879,8882,8884,8888,8902,8908,8908,8920,8950,8962,8996,8998,8998,9002,9002,9002,9026,9032,9052,9053,9074,9076,9089,9100,9106,9106,9134,9134,9134,9137,9164,9164,9170,9178,9190,9194,9218,9248,9248,9248,9250,9250,9250,9250,9250,9251,9251,9251,9251,9251,9254,9254,9254,9257,9278,9278,9278,9290,9290,9296,9296,9308,9308,9308,9326,9326,9328,9328,9332,9332,9332,9332,9332,9332,9344,9346,9346,9350,9356,9356,9358,9358,9368,9373,9374,9374,9376,9376,9380,9380,9380,9380,9385,9386,9388,9388,9398,9398,9400,9400,9403,9404,9404,9406,9406,9412,9412,9416,9422,9434,9440,9470,9488,9488,9500,9500,9518,9524,9524,9530,9533,9536,9538,9584,9587,9587,9590,9608,9650,9656,9656,9656,9662,9662,9680,9686,9692,9698,9724,9737,9740,9743,9766,9772,9784,9790,9808,9808,9814,9824,9826,9838,9838,9850,9866,9886,9970,9970,9989,10010,10018,10018,10019,10088,10091,10091,10136,10184,10204,10220,10246,10412,10456,10490,10492,10514,10514,10768,10792,10816,10864,10864,10865,10910,10922,10924,10924,10925,11000,11002,11002,11018,11020,11020,11026,11138,11141,11141,11204,11207,11252,11255,11264,11279,11846,12152,12253,12254,12314,12356,12452,12482,12500,12680,12926,13046,13052,13058,13064,13070,13076,13082,13094,13106,13112,13118,13124,13364,13406,13406,13447,13448,13448,13484,13892,14042,14120,14120,14132,14132,14342,14342,14372,14408,14414,14432,14450,14462,14462,14480,14480,14708,14750,14780,15062,15062,15062,15098,15488,15488,15488,15512,15542,15602,15614,15626,15632,15872,15980,16022,16268,16286,16688,16994,17000,17156,17156,17162,17282,17330,17348,17354,17420,17462,17594,17660,17666,17684,17696,17714,17714,17714,17714,17714,17768,17768,17924,17942,17942,17942,17960,17996,18020,18026,18044,18074,18110,18110,18128,18128,18140,18152,18500,18548,18548,18554,18554,18554,18554,18554,18554,18554,18554,18554,18554,18572,18572,18578,18584,18584,18584,18584,18584,18596,18596,18596,18596,18596,18596,18596]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>driver<\/th>\n      <th>affected<\/th>\n      <th>effect<\/th>\n      <th>effect_num<\/th>\n      <th>text_number<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"driver","targets":1},{"name":"affected","targets":2},{"name":"effect","targets":3},{"name":"effect_num","targets":4},{"name":"text_number","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div></div>
<p>Small example</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># effects&lt;-cbind.data.frame(effect=c("decrease","increase"),effect_direction=c((-1),1))</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># example.list&lt;-list()</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for(i in 1:length(effects$effect)){</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   example.list[[i]]&lt;-causalize(corpus$Text[1:5],effect=effects[i,1],effect_num=effects[i,2])</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(example.list, here("data/example_list.rds"))</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># example.list &lt;- import(here("data/example_list.rds"))</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># decrease_driver &lt;- example.list[[1]]</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># increase_driver &lt;- example.list[[2]]</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># # Error in if (which(sent1$lemma == effect) == 1) { : </span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># #   the condition has length &gt; 1</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co"># # export temp.list to .Rds file</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># # test &lt;- import(here("data/drivers_list.rds"))</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># example&lt;-do.call(rbind.data.frame,example.list)</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># example$driver&lt;-as.character(example$driver)</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co"># example$affected&lt;-as.character(example$affected)</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data/example_list.rds"</span>))</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(example) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-60bc393cb0c2f49f2c04" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-60bc393cb0c2f49f2c04">{"x":{"filter":"none","vertical":false,"data":[["1"],["mpox"],["risk"],["increase"],[1],[4]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>driver<\/th>\n      <th>affected<\/th>\n      <th>effect<\/th>\n      <th>effect_num<\/th>\n      <th>text_number<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"driver","targets":1},{"name":"affected","targets":2},{"name":"effect","targets":3},{"name":"effect_num","targets":4},{"name":"text_number","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div></div>
<!-- 



::: {.cell}

```{.r .cell-code .hidden}
who_corpus <- corpus(corpus, text_field = "Text") 

tokens <- tokens(who_corpus, what = "word",
              remove_punct = TRUE,
              remove_symbols = TRUE,
              remove_numbers = TRUE,
              remove_url = TRUE,
              split_hyphens = TRUE,
              verbose = TRUE) %>%
  tokens_tolower() %>%
  tokens_select(stopwords("english"), selection = "remove", padding = FALSE, verbose = TRUE)
```

::: {.cell-output .cell-output-stderr .hidden}

```
Creating a tokens from a corpus object...
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...starting tokenization
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...tokenizing 1 of 1 blocks
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...preserving elisions
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...preserving social media tags (#, @)
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...removing separators, punctuation, symbols, numbers, URLs 
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...25,742 unique types
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
 ...complete, elapsed time: 4.72 seconds.
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
Finished constructing tokens from 18,648 documents.
```


:::

::: {.cell-output .cell-output-stderr .hidden}

```
removed 122 features
```


:::
:::




There are 2 mains data structure: 
- the (1) document-termmatrix (DTM): a tabular structure where the rows are our documents and the columns are the contexts in which a word appears.
- the (2) term-context matrix (TCM): also a tabular structure, but the rows are terms and the columns may be the documents in which the terms appear (i.e., a rotated DTM) or the other terms a target term occurs alongside (a term-cooccurrence matrix) within a given window. 

The first step, though, is to tokenize. -->
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>  </div> <!-- /content --> 
  
</body></html>